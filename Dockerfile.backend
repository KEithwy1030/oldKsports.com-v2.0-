FROM node:22-alpine

LABEL "language"="nodejs"
LABEL "framework"="express"

WORKDIR /app

# 安装后端依赖
COPY server/package*.json ./
RUN npm ci --only=production

# 复制数据库初始化脚本（供自动迁移脚本使用）
COPY database_init_schema.sql ../

# 复制后端代码
COPY server/ ./

EXPOSE 8080

CMD ["npm", "start"]

